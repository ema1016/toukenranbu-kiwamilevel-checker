const expTables = {
  tantou: [0, 1000, 3000, 6000, 10000, 15000, 21000, 28000, 36000, 45000, 55000, 66000, 78000, 91000, 105000, 120000, 136000, 153000, 171000, 190000, 210000, 231000, 253000, 276000, 300000, 325000, 351000, 378000, 406000, 435000, 465000, 496000, 528000, 561000, 595000, 630000, 666000, 703000, 741000, 780000, 820000, 861000, 903000, 946000, 990000, 1035000, 1081000, 1128000, 1176000, 1225000, 1275000, 1326000, 1378000, 1431000, 1485000, 1540000, 1596000, 1653000, 1711000, 1770000, 1830000, 1891000, 1953000, 2016000, 2080000, 2145000, 2211000, 2278000, 2346000, 2415000, 2485000, 2556000, 2628000, 2701000, 2775000, 2850000, 2926000, 3003000, 3081000, 3160000, 3240000, 3321000, 3403000, 3486000, 3570000, 3655000, 3741000, 3828000, 3916000, 4005000, 4095000, 4186000, 4278000, 4371000, 4465000, 4560000, 4656000, 4753000, 4851000, 4950000],
  wakizashi: "tantou",
  uchigatana2: "tantou",
  uchigatana3: [0, 1000, 3500, 7500, 13000, 20000, 28500, 38500, 50000, 63000, 77500, 93500, 111000, 130000, 150500, 172500, 196000, 221000, 247500, 275500, 305000, 336000, 368500, 402500, 438000, 475000, 513500, 553500, 595000, 638000, 682500, 728500, 776000, 825000, 875500, 927500, 981000, 1036000, 1092500, 1150500, 1210000, 1271000, 1333500, 1397500, 1463000, 1530000, 1598500, 1668500, 1740000, 1813000, 1887500, 1963500, 2041000, 2120000, 2200500, 2282500, 2366000, 2451000, 2537500, 2625500, 2715000, 2806000, 2898500, 2992500, 3088000, 3185000, 3283500, 3383500, 3485000, 3588000, 3692500, 3798500, 3906000, 4015000, 4125500, 4237500, 4351000, 4466000, 4582500, 4700500, 4820000, 4941000, 5063500, 5187500, 5313000, 5440000, 5568500, 5698500, 5830000, 5963000, 6097500, 6233500, 6371000, 6510000, 6650500, 6792500, 6936000, 7081000, 7227500, 7375500, 7525000],
  tachi: "uchigatana3",
  ootachi: "uchigatana3",
  yari: "uchigatana3",
  naginata: "uchigatana3"
};

function calculateLevel() {
  const type = document.getElementById("type").value;
  const exp = parseInt(document.getElementById("exp").value);
  const result = document.getElementById("result");

  if (isNaN(exp)) {
    result.textContent = "累計経験値を正しく入力してください。";
    return;
  }

  let table = expTables[type];
  if (typeof table === "string") table = expTables[table];

  let level = 1;
  for (let i = 1; i < table.length; i++) {
    if (exp < table[i]) break;
    level = i + 1;
  }

  result.textContent = `推定レベル：${level}`;
}
