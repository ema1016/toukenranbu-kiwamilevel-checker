// 刀種ごとの経験値テーブル（Lv1〜Lv99 累積経験値）
const expTables = {
  短刀: [
    0, 100, 250, 450, 700, 1000, 1350, 1750, 2200, 2700, 3250, 3850, 4500, 5200,
    5950, 6750, 7600, 8500, 9450, 10450, 11550, 12750, 14050, 15450, 16950,
    18550, 20250, 22050, 23950, 25950, 28050, 30250, 32550, 34950, 37450, 40050,
    42750, 45550, 48450, 51450, 54550, 57750, 61050, 64450, 67950, 71550, 75250,
    79050, 82950, 86950, 91050, 95250, 99550, 103950, 108450, 113050, 117750,
    122550, 127450, 132450, 137550, 142750, 148050, 153450, 158950, 164550,
    170250, 176050, 181950, 187950, 194050, 200250, 206550, 212950, 219450,
    226050, 232750, 239550, 246450, 253450, 260550, 267750, 275050, 282450,
    289950, 297550, 305250, 313050, 320950, 328950, 337050, 345250, 353550,
    361950, 370450, 379050, 387750, 396550, 405450, 414450, 423550, 62630123
  ],
  脇差: [0, 120, 300, 550, 870, 1260, 1720, 2240, 2820, 3460, 4160, 4920, 5740, 6620, 7560, 8560, 9620, 10740, 11920, 13160, 14460, 15820, 17240, 18720, 20260, 21860, 23520, 25240, 27020, 28860, 30760, 32720, 34740, 36820, 38960, 41160, 43420, 45740, 48120, 50560, 53060, 55620, 58240, 60920, 63660, 66460, 69320, 72240, 75220, 78260, 81360, 84520, 87740, 91020, 94360, 97760, 101220, 104740, 108320, 111960, 115660, 119420, 123240, 127120, 131060, 135060, 139120, 143240, 147420, 151660, 155960, 160320, 164740, 169220, 173760, 178360, 183020, 187740, 192520, 197360, 202260, 207220, 212240, 217320, 222460, 227660, 232920, 238240, 243620, 249060, 254560, 260120, 265740, 271420, 277160, 282960, 288820, 294740, 300720, 306760, 312860, 319020, 68403309],
  打刀2: [0, 200, 500, 900, 1400, 2000, 2700, 3500, 4400, 5400, 6500, 7700, 9000, 10400, 11900, 13500, 15200, 17000, 18900, 20900, 23000, 25200, 27500, 29900, 32400, 35000, 37700, 40500, 43400, 46400, 49500, 52700, 56000, 59400, 62900, 66500, 70200, 74000, 77900, 81900, 86000, 90200, 94500, 98900, 103400, 108000, 112700, 117500, 122400, 127400, 132500, 137700, 143000, 148400, 153900, 159500, 165200, 171000, 176900, 182900, 189000, 195200, 201500, 207900, 214400, 221000, 227700, 234500, 241400, 248400, 255500, 262700, 270000, 277400, 284900, 292500, 300200, 308000, 315900, 323900, 332000, 340200, 348500, 356900, 365400, 374000, 382700, 391500, 400400, 409400, 418500, 427700, 437000, 446400, 455900, 465500, 475200, 485000, 494900, 504900, 515000, 525200, 535500, 545900, 75270591],
  打刀3: [同上＋修正後の最終値：81489074],
  太刀: [同上＋修正後の最終値：87829556],
  大太刀: [同上＋修正後の最終値：94185039],
  槍: [脇差と同じ],
  薙刀: [脇差と同じ]
};

function getLevel(exp, type) {
  const table = expTables[type];
  if (!table) return '刀種が無効です';
  for (let i = table.length - 1; i >= 0; i--) {
    if (exp >= table[i]) return `Lv${i + 1}`;
  }
  return 'Lv1未満';
}

document.getElementById('calcBtn').addEventListener('click', () => {
  const exp = parseInt(document.getElementById('expInput').value.replace(/,/g, ''));
  const type = document.getElementById('typeSelect').value;
  if (isNaN(exp)) {
    document.getElementById('result').textContent = '数値を入力してください。';
    return;
  }
  const level = getLevel(exp, type);
  document.getElementById('result').textContent = `予測レベル：${level}`;
});
